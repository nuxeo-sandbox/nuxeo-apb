##############################################################################
## Deprovision nuxeo-kibana
## This role executes much of the needed functionality to deprovision an
## application using an Ansible Playbook Bundle and delete resources created
## in the sample apb generated by the provision role.
##############################################################################
---
- name: Delete Service
  k8s_v1_service:
    name: "{{ app_name }}"
    namespace: "{{ namespace }}"
    state: absent

- name: Delete Route
  openshift_v1_route:
    name: "{{ app_name }}"
    namespace: "{{ namespace }}"
    state: absent

- name: Delete PersistentVolumeClaim
  k8s_v1_persistent_volume_claim:
    name: "{{ app_name }}-claim"
    namespace: "{{ namespace}}"
    state: absent

- name: Delete DeploymentConfig
  openshift_v1_deployment_config:
    name: "{{ app_name }}"
    namespace: "{{ namespace}}"
    state: absent

- name: Delete ServiceAccount
  k8s_v1_service_account:
    name: "{{ app_name }}-proxy"
    namespace: "{{ namespace }}"
    state: absent
